# BusinessCard Database Setup Instructions

This document provides a full guide to setting up the BusinessCard database environment using Oracle Database 21c and SQL Developer.

---

## 1. Requirements

- Oracle Database 21c: [Download](https://www.oracle.com/database/technologies/oracle21c-windows-downloads.html)
- SQL Developer: [Download](https://www.oracle.com/database/sqldeveloper/)
- Set password during install, e.g., `Test321`

---

## 2. Create SYSDBA Connection (TestDB)

1. Click the green (+) on top-left in SQL Developer
2. Connection Name: `TestDB`
3. Username: `SYS`
4. Role: `SYSDBA`
5. Password: `Test321` (or your chosen password)
6. Hostname: `localhost` or use your IPv4 from `ipconfig`
7. Service name: `xe`
8. Save, Test, then Connect

---

## 3. Create User (c##Bcard)

Run each of the following SQL commands separately:

```sql
CREATE USER c##Bcard IDENTIFIED BY Test321 DEFAULT TABLESPACE users TEMPORARY TABLESPACE temp;
GRANT CONNECT, CREATE SESSION TO c##Bcard;
GRANT DBA TO c##Bcard;
ALTER USER c##Bcard QUOTA UNLIMITED ON users;
```

---

## 4. Add New User Connection (BusinessCard)

1. Click the green (+) again in SQL Developer
2. Connection Name: `BusinessCard`
3. Username: `c##Bcard`
4. Role: `Default`
5. Password: `Test321`
6. Hostname: `localhost` or IPv4 from `ipconfig`
7. Service name: `xe`
8. Save, Test, then Connect

---

## 5. Create BusinessCard Table

```sql
CREATE TABLE businesscard (
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    email VARCHAR2(50),
    gender VARCHAR2(50),
    dateofbirth DATE,
    phone VARCHAR2(50),
    imagepath VARCHAR2(200),
    address VARCHAR2(50)
);
```

---

## 6. Create Package Specification

```sql
CREATE OR REPLACE PACKAGE BusinessCard_Package IS
    PROCEDURE getAllCards;
    PROCEDURE CreateCard(Cname IN VARCHAR, Cemail IN VARCHAR, Cgender IN VARCHAR, Cbirthdate IN DATE, Cphone IN VARCHAR, Cimagepath IN VARCHAR, Caddress IN VARCHAR);
    PROCEDURE DeleteCard(Cid IN NUMBER);
    PROCEDURE getCardByName(Cname IN VARCHAR);
    PROCEDURE getcardByDOB(CDOB IN DATE);
    PROCEDURE getcardByPhone(Cphone IN VARCHAR);
    PROCEDURE getcardByGender(Cgender IN VARCHAR);
    PROCEDURE getcardByEmail(Cemail IN VARCHAR);
END BusinessCard_Package;
```

---

## 7. Create Package Body

```sql
CREATE OR REPLACE PACKAGE BODY BusinessCard_Package IS

PROCEDURE getAllCards IS
    c_all SYS_REFCURSOR;
BEGIN
    OPEN c_all FOR SELECT * FROM businesscard;
    DBMS_SQL.RETURN_RESULT(c_all);
END getAllCards;

PROCEDURE CreateCard(Cname IN VARCHAR, Cemail IN VARCHAR, Cgender IN VARCHAR, Cbirthdate IN DATE, Cphone IN VARCHAR, Cimagepath IN VARCHAR, Caddress IN VARCHAR) IS
BEGIN
    INSERT INTO businesscard(name, email, gender, dateofbirth, phone, imagepath, address)
    VALUES (Cname, Cemail, Cgender, Cbirthdate, Cphone, Cimagepath, Caddress);
    COMMIT;
END CreateCard;

PROCEDURE DeleteCard(Cid IN NUMBER) IS
BEGIN
    DELETE FROM businesscard WHERE id = Cid;
    COMMIT;
END DeleteCard;

PROCEDURE getCardByName(Cname IN VARCHAR) IS
    c_all SYS_REFCURSOR;
BEGIN
    OPEN c_all FOR SELECT * FROM businesscard WHERE name = Cname;
    DBMS_SQL.RETURN_RESULT(c_all);
END getCardByName;

PROCEDURE getcardByDOB(CDOB IN DATE) IS
    c_all SYS_REFCURSOR;
BEGIN
    OPEN c_all FOR SELECT * FROM businesscard WHERE dateofbirth = CDOB;
    DBMS_SQL.RETURN_RESULT(c_all);
END getcardByDOB;

PROCEDURE getcardByPhone(Cphone IN VARCHAR) IS
    c_all SYS_REFCURSOR;
BEGIN
    OPEN c_all FOR SELECT * FROM businesscard WHERE phone = Cphone;
    DBMS_SQL.RETURN_RESULT(c_all);
END getcardByPhone;

PROCEDURE getcardByGender(Cgender IN VARCHAR) IS
    c_all SYS_REFCURSOR;
BEGIN
    OPEN c_all FOR SELECT * FROM businesscard WHERE gender = Cgender;
    DBMS_SQL.RETURN_RESULT(c_all);
END getcardByGender;

PROCEDURE getcardByEmail(Cemail IN VARCHAR) IS
    c_all SYS_REFCURSOR;
BEGIN
    OPEN c_all FOR SELECT * FROM businesscard WHERE email = Cemail;
    DBMS_SQL.RETURN_RESULT(c_all);
END getcardByEmail;

END BusinessCard_Package;
```